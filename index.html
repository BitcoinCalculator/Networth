<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Net Worth Tracker</title>
<style>
  body {
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    background: #0f172a;
    color: #f1f5f9;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
  }
  .container {
    background: #1e293b;
    margin-top: 40px;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.5);
    width: 100%;
    max-width: 500px;
    text-align: center;
  }
  h1 {
    font-size: 2.2em;
    margin-bottom: 20px;
    color: #38bdf8;
  }
  label {
    display: block;
    margin-top: 15px;
    font-size: 0.95em;
    color: #cbd5e1;
  }
  input {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: none;
    border-radius: 8px;
    font-size: 1em;
    background: #334155;
    color: #f8fafc;
  }
  button {
    margin-top: 20px;
    padding: 12px;
    width: 100%;
    background: #38bdf8;
    color: #0f172a;
    border: none;
    border-radius: 8px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.3s;
  }
  button:hover { background: #0ea5e9; }
  .networth {
    font-size: 1.8em;
    font-weight: bold;
    margin-bottom: 20px;
    color: #fbbf24;
  }
  .prices {
    font-size: 0.9em;
    color: #94a3b8;
    margin-top: 15px;
  }
  .hidden { display: none; }
</style>
</head>
<body>
<div class="container">
  <div id="netWorth" class="networth">Net Worth: $0</div>
  <h1>Net Worth Tracker</h1>

  <div id="inputs">
    <label>Bitcoin Holdings (BTC):</label>
    <input type="number" id="btcInput" step="0.0001">

    <label>MSTR Shares:</label>
    <input type="number" id="mstrInput" step="1">

    <label>Real Estate Value ($):</label>
    <input type="number" id="realEstateInput">

    <label>401K Value ($):</label>
    <input type="number" id="k401Input">

    <label>Other Investments ($):</label>
    <input type="number" id="otherInput">

    <button id="saveBtn">üíæ Save Defaults</button>
  </div>

  <button id="editBtn" class="hidden">‚úèÔ∏è Change Inputs</button>

  <div id="prices" class="prices">Loading live prices...</div>
</div>

<script>
const API_KEY = "PGHM2FVON57DHKMD"; // Alpha Vantage key

const btcInput = document.getElementById("btcInput");
const mstrInput = document.getElementById("mstrInput");
const realEstateInput = document.getElementById("realEstateInput");
const k401Input = document.getElementById("k401Input");
const otherInput = document.getElementById("otherInput");

const saveBtn = document.getElementById("saveBtn");
const editBtn = document.getElementById("editBtn");
const netWorthDisplay = document.getElementById("netWorth");
const pricesNote = document.getElementById("prices");
const inputsDiv = document.getElementById("inputs");

let btcPrice = 0;
let mstrPrice = 0;

// Load saved values
function loadSavedValues() {
  let saved = localStorage.getItem("savedDefaults") === "true";
  btcInput.value = localStorage.getItem("btc") || "";
  mstrInput.value = localStorage.getItem("mstr") || "";
  realEstateInput.value = localStorage.getItem("realEstate") || "";
  k401Input.value = localStorage.getItem("k401") || "";
  otherInput.value = localStorage.getItem("other") || "";
  if(saved) { hideInputs(); }
}

// Save values
function saveValues() {
  localStorage.setItem("btc", btcInput.value);
  localStorage.setItem("mstr", mstrInput.value);
  localStorage.setItem("realEstate", realEstateInput.value);
  localStorage.setItem("k401", k401Input.value);
  localStorage.setItem("other", otherInput.value);
  localStorage.setItem("savedDefaults", "true");
  hideInputs();
  calculateNetWorth();
}

// Hide inputs for privacy
function hideInputs() {
  inputsDiv.classList.add("hidden");
  editBtn.classList.remove("hidden");
}

// Show inputs to edit
editBtn.addEventListener("click", () => {
  inputsDiv.classList.remove("hidden");
  editBtn.classList.add("hidden");
});

// Fetch BTC price
async function fetchBTC() {
  let btcRes = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd");
  let btcData = await btcRes.json();
  btcPrice = btcData.bitcoin.usd;
}

// Fetch MSTR price
async function fetchMSTR() {
  let url = `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=MSTR&apikey=${API_KEY}`;
  let res = await fetch(url);
  let data = await res.json();
  mstrPrice = parseFloat(data["Global Quote"]["05. price"]);
}

// Calculate net worth
function calculateNetWorth() {
  const btcValue = (parseFloat(btcInput.value) || 0) * btcPrice;
  const mstrValue = (parseFloat(mstrInput.value) || 0) * mstrPrice;
  const realEstateValue = parseFloat(realEstateInput.value) || 0;
  const k401Value = parseFloat(k401Input.value) || 0;
  const otherValue = parseFloat(otherInput.value) || 0;

  const total = btcValue + mstrValue + realEstateValue + k401Value + otherValue;
  netWorthDisplay.textContent = `Net Worth: $${total.toLocaleString(undefined, {minimumFractionDigits:2, maximumFractionDigits:2})}`;
}

// Fetch all prices
async function fetchPrices() {
  try {
    await fetchBTC();
    await fetchMSTR();
    pricesNote.textContent = `BTC: $${btcPrice.toLocaleString()} | MSTR: $${mstrPrice.toLocaleString()}`;
    calculateNetWorth();
  } catch(e) {
    pricesNote.textContent = "‚ö†Ô∏è Could not fetch live prices.";
    calculateNetWorth();
  }
}

// Event listeners
[btcInput, mstrInput, realEstateInput, k401Input, otherInput].forEach(input => {
  input.addEventListener("input", calculateNetWorth);
});
saveBtn.addEventListener("click", saveValues);

// Initialize
loadSavedValues();
fetchPrices();
setInterval(fetchPrices, 120000);
</script>
</body>
</html>
